<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carica le tue foto üì∏</title>
  <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex" />
  <meta name="googlebot" content="noindex, nofollow, noarchive, nosnippet, noimageindex" />

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Marcellus&family=Montserrat:wght@500;600&display=swap" rel="stylesheet">

  
  <!-- CSS Comune -->
  <link rel="stylesheet" href="style.css">
<!-- Cloudinary Upload Widget -->
  <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>

  <style>
    /* Upload page layout (navbar da style.css) */
    .card {
      max-width: min(720px, 92vw);
      margin: 110px auto 40px;
      padding: clamp(24px, 4vw, 40px);
      background: var(--panel-bg);
      border: 1px solid var(--panel-border);
      border-radius: 24px;
      box-shadow: var(--shadow);
      text-align: center;
    }

    .card h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(28px, 5vw, 44px);
      margin: 0 0 12px;
      color: #111;
    }

    .card p {
      color: #444;
      line-height: 1.6;
      margin: 0 0 18px;
    }

    .btn {
      display: inline-block;
      padding: 12px 22px;
      border-radius: 999px;
      border: 1px solid var(--btn-border);
      background: var(--btn-bg);
      color: #222;
      font-weight: 800;
      font-family: inherit;
      box-shadow: 0 8px 20px rgba(0,0,0,0.05);
      cursor: pointer;
      transition: transform .2s ease, background .2s ease, box-shadow .2s ease;
    }

    .btn:hover {
      background: var(--btn-hover);
      transform: translateY(-2px);
      box-shadow: 0 12px 25px rgba(0,0,0,0.10);
    }

    .link {
      display: inline-block;
      margin-top: 8px;
      color: #222;
      text-decoration: none;
      font-weight: 700;
    }

    .link:hover { text-decoration: underline; }

    .muted {
      color: #666;
      font-size: 13px;
    }
  </style>
</head>
<body>
  
  <nav class="nav">
    <div class="logo-badge" aria-label="Logo E e C">E&amp;C</div>
    <div class="navlinks">
      <a href="index.html">Home</a>
      <a href="cerimonia.html">Cerimonia</a>
      <a href="ricevimento.html">Ricevimento</a>
      <a href="mappa.html">Mappa</a>
      <a href="lista-nozze.html">Lista Nozze</a>
      <a href="rsvp.html">RSVP</a>
      <a href="storia.html">Storia</a>
      <a href="gallery.html">Gallery</a>
      <a href="contatti.html">Contatti</a>
      <a href="upload.html" class="nav-upload">Upload Foto</a>
    </div>
  </nav>
<main class="card" aria-label="Carica foto">
    <h1>Carica le tue foto üì∏</h1>
    <p>Premi il bottone, scegli le foto dal telefono e inviale. Le immagini in HD andranno nell‚Äôalbum degli sposi.</p>

    <button id="uploadBtn" class="btn">Carica foto</button>
    <br />
    <a class="link" href="index.html">‚Üê Torna al sito</a>

    <p class="muted" style="margin-top:16px">
      Puoi selezionare pi√π file (max 50 MB ciascuno). Formati: JPG/PNG/HEIC/WEBP.
    </p>
  </main>

  <script>
    // Configura i TUOI dati Cloudinary
    const cloudName    = 'dmzv9mzpr';     // ‚Üê il tuo cloud name
    const uploadPreset = 'wedding-ec';    // ‚Üê il tuo preset UNSIGNED
    const targetFolder = 'wedding-ec';    // ‚Üê cartella di destinazione

    function ensureWidgetLoaded(){
      if (typeof window.cloudinary === 'undefined'){
        alert("Non riesco ad aprire il selettore foto.\nControlla che l'ad-blocker o la protezione del browser non blocchino contenuti di terze parti e riprova.");
        console.error('Cloudinary widget non disponibile.');
        return false;
      }
      return true;
    }

    document.getElementById('uploadBtn').addEventListener('click', function(){
      if (!ensureWidgetLoaded()) return;

      window.cloudinary.openUploadWidget({
        cloudName: cloudName,
        uploadPreset: uploadPreset,        // deve essere UNSIGNED + Enabled
        folder: targetFolder,              // cartella dove salvare le foto
        sources: ['local','camera'],
        multiple: true,
        maxFileSize: 50 * 1024 * 1024,     // 50MB per file
        clientAllowedFormats: ['jpg','jpeg','png','heic','webp'],
        showAdvancedOptions: false,
        showPoweredBy: false,
        cropping: false,
        defaultSource: 'local',
      }, (error, result) => {
        if (error){
          console.error('Cloudinary error:', error);
          alert('Si √® verificato un errore durante il caricamento. Riprova.');
          return;
        }

        // Per ogni file caricato con successo
        if (result && result.event === 'success') {
          console.log('‚úÖ Upload:', result.info.original_filename, result.info.secure_url);
        }

        // Quando la coda √® terminata (tutti i file processati)
        if (result && result.event === 'queues-end') {
          alert('Grazie! Le tue foto sono state caricate ‚úÖ');
          // Se vuoi tornare alla home automaticamente:
          // window.location.href = 'index.html';
        }
      });
    });
  </script>
</body>
</html>
