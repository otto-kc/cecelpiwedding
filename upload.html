<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover" />
  <title>Carica le tue foto & video üì∏ ‚Äî Elpidio & Cecilia</title>
  <meta name="description" content="Carica le tue foto del matrimonio" />
  <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex" />
  <meta name="googlebot" content="noindex, nofollow" />
  <meta name="bingbot" content="noindex, nofollow" />
  <meta name="slurp" content="noindex, nofollow" />

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Imperial+Script&family=Marcellus&family=Montserrat:wght@500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <!-- Cloudinary Upload Widget -->
  <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>

  <style>
    :root { 
      --pearl-white: #FAF9F6;
      --nav-text: #222222;
      --panel-bg: rgba(255,255,255,0.95);
      --panel-border: rgba(0,0,0,0.12);
      --shadow: 0 18px 50px rgba(0,0,0,0.08);
      --btn-bg: rgba(255,255,255,0.95);
      --btn-border: rgba(0,0,0,0.20);
      --btn-hover: rgba(0,0,0,0.05);
      --blue: #008CFF; 
      --coral: #FF3B5B; 
      --gold-color: #D4AF37;
    }
    
    * { box-sizing: border-box; }
    html, body { 
      height: 100%; 
      margin: 0; 
      font-family: 'Montserrat', system-ui, -apple-system, 'Segoe UI', Roboto, Inter, Arial, sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #c2e9fb, #f9c2f9);
      display: grid; 
      place-items: center;
      padding: 20px;
    }
    
    /* MAIN CONTENT */
    .card {
      width: min(680px, 92vw);
      background: #fff; 
      border-radius: 22px;
      padding: 36px 28px;
      box-shadow: var(--shadow);
      text-align: center;
      margin-top: 80px;
    }
    
    h1 {
      font-family: 'Marcellus', serif;
      margin: 0 0 8px; 
      font-size: clamp(26px, 4vw, 36px);
      color: #111111;
    }
    
    p {
      color: #2b2b2b; 
      margin: 0 0 18px;
      line-height: 1.6;
    }
    
    .btn {
      display: inline-block; 
      border: 0; 
      cursor: pointer;
      padding: 12px 26px; 
      border-radius: 999px; 
      color: #fff; 
      font-weight: 800;
      background: linear-gradient(90deg, var(--blue), var(--coral));
      box-shadow: 0 12px 28px rgba(0,0,0,.18);
      transition: transform .15s ease, box-shadow .15s ease;
      font-size: 16px;
      min-height: 48px;
      min-width: 48px;
    }
    
    .btn:hover { 
      transform: translateY(-2px); 
      box-shadow: 0 16px 34px rgba(0,0,0,.24); 
    }
    
    .link { 
      display: inline-block; 
      margin-top: 14px; 
      color: var(--blue); 
      font-weight: 800; 
      text-decoration: none;
      padding: 8px 16px;
      border-radius: 8px;
      transition: background .2s ease;
    }
    
    .link:hover {
      background: rgba(0, 140, 255, 0.1);
    }
    
    .muted { 
      font-size: .92rem; 
      color: #475569; 
      margin-top: 16px;
    }
    
    footer {
      text-align: center;
      padding: 30px 20px;
      font-size: 12px;
      opacity: 0.6;
      color: #666;
      position: relative;
      margin-top: 40px;
    }
    
    /* Mobile optimization */
    @media (max-width: 768px) {
      .card {
        margin-top: 100px;
        padding: 24px 20px;
      }
      
      .btn {
        padding: 14px 24px;
        font-size: 15px;
      }
    }
  </style>
</head>
<body>

  <!-- NAVBAR CON HAMBURGER MENU -->
  <nav class="nav">
    <div class="logo-badge" aria-label="Logo E e C">E&amp;C</div>
    
    <!-- Hamburger menu button (mobile only) -->
    <button class="hamburger" id="hamburger" aria-label="Menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
    
    <!-- Navigation links -->
    <div class="navlinks" id="navlinks">
      <a href="index.html">Home</a>
      <a href="cerimonia-ricevimento.html">Cerimonia & Ricevimento</a>
      <a href="lista-nozze.html">Lista Nozze</a>
      <a href="rsvp.html">RSVP</a>
      <a href="storia.html">La nostra storia</a>
      <a href="gallery.html">Gallery</a>
      <a href="contatti.html">Contatti</a>
    </div>
  </nav>

  <main class="card" aria-label="Carica foto">
    <h1>Carica le tue foto & video üì∏</h1>
    <p>Premi il bottone, scegli le foto dal telefono e inviale. Le immagini in HD andranno nell'album degli sposi.</p>

    <button id="uploadBtn" class="btn">Carica foto & video</button>
    <br />
    <a class="link" href="gallery.html">‚Üê Torna alla Gallery</a>

    <p class="muted">
      Puoi selezionare pi√π file (max 50 MB ciascuno). Formati: JPG/PNG/HEIC/WEBP/MP4/MOV/GIF/BMP/TIFF.
    </p>
  </main>

  <footer>¬© <span id="year"></span> Elpidio &amp; Cecilia</footer>

  <!-- BACK TO TOP BUTTON -->
  <button class="back-to-top" id="backToTop" aria-label="Torna all'inizio" title="Torna su">‚ñ≤</button>

  <script>
    // Anno corrente nel footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // Menu hamburger mobile
    const hamburger = document.getElementById('hamburger');
    const navlinks = document.getElementById('navlinks');
    
    if (hamburger && navlinks) {
      hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        navlinks.classList.toggle('active');
        
        document.querySelectorAll('.navlinks a').forEach(link => {
          link.addEventListener('click', () => {
            hamburger.classList.remove('active');
            navlinks.classList.remove('active');
          });
        });
      });
      
      document.addEventListener('click', (e) => {
        if (!hamburger.contains(e.target) && !navlinks.contains(e.target)) {
          hamburger.classList.remove('active');
          navlinks.classList.remove('active');
        }
      });
    }

    // Back to top
    const backBtn = document.getElementById('backToTop');
    const toggleBackBtn = () => {
      if (!backBtn) return;
      if (window.scrollY > 300) backBtn.classList.add('show');
      else backBtn.classList.remove('show');
    };
    toggleBackBtn();
    window.addEventListener('scroll', toggleBackBtn);
    if (backBtn) backBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    // Configura i TUOI dati Cloudinary
    const cloudName    = 'dmzv9mzpr';
    const uploadPreset = 'wedding-ec';
    const targetFolder = 'wedding-ec';

    function ensureWidgetLoaded(){
      if (typeof window.cloudinary === 'undefined'){
        alert("Non riesco ad aprire il selettore foto.\nControlla che l'ad-blocker o la protezione del browser non blocchino contenuti di terze parti e riprova.");
        console.error('Cloudinary widget non disponibile.');
        return false;
      }
      return true;
    }

    document.getElementById('uploadBtn').addEventListener('click', function(){
      if (!ensureWidgetLoaded()) return;

      window.cloudinary.openUploadWidget({
        cloudName: cloudName,
        uploadPreset: uploadPreset,
        folder: targetFolder,
        sources: ['local','camera'],
        multiple: true,
        maxFileSize: 50 * 1024 * 1024,
        clientAllowedFormats: ['jpg','jpeg','png','heic','webp','mp4','mov','gif','bmp','tiff','JPG','JPEG','PNG','HEIC','WEBP','MP4','MOV','GIF','BMP','TIFF'],
        showAdvancedOptions: false,
        showPoweredBy: false,
        cropping: false,
        defaultSource: 'local',
      }, (error, result) => {
        if (error){
          console.error('Cloudinary error:', error);
          alert('Si √® verificato un errore durante il caricamento. Riprova.');
          return;
        }

        if (result && result.event === 'success') {
          console.log('‚úÖ Upload:', result.info.original_filename, result.info.secure_url);
        }

        if (result && result.event === 'queues-end') {
          alert('Grazie! Le tue foto e video sono stati caricati ‚úÖ');
        }
      });
    });
  </script>
</body>
</html>